import { useRef, useEffect } from 'react'
import anime from 'animejs'

function Blob(props) {
    const blobPathRef = useRef(null)

    const blobShapes = [
        "M159.8 -154.8C209.8 -109.8 254.9 -54.9 245.1 -9.8C235.4 35.4 170.7 70.7 120.7 110.9C70.7 151 35.4 196 -11.7 207.7C-58.7 219.4 -117.4 197.7 -155.5 157.5C-193.7 117.4 -211.4 58.7 -204.3 7.1C-197.2 -44.5 -165.4 -89.1 -127.3 -134.1C-89.1 -179.1 -44.5 -224.5 5.2 -229.7C54.9 -234.9 109.8 -199.8 159.8 -154.8",
        "M146.5 -152.2C178 -115 183.5 -57.5 175.3 -8.2C167 41 145 82 113.5 128C82 174 41 225 -14.8 239.9C-70.7 254.7 -141.4 233.4 -166.4 187.4C-191.4 141.4 -170.7 70.7 -159.8 11C-148.8 -48.8 -147.6 -97.6 -122.6 -134.7C-97.6 -171.9 -48.8 -197.5 4.4 -201.8C57.5 -206.2 115 -189.4 146.5 -152.2",
        "M144.3 -162.4C169.3 -119.3 159.6 -59.6 157 -2.6C154.5 54.4 158.9 108.9 133.9 158.9C108.9 208.9 54.4 254.4 -5.9 260.3C-66.2 266.2 -132.5 232.5 -179.3 182.5C-226.1 132.5 -253.6 66.2 -243.1 10.5C-232.6 -45.3 -184.2 -90.5 -137.3 -133.7C-90.5 -176.8 -45.3 -217.9 7.2 -225.1C59.6 -232.3 119.3 -205.6 144.3 -162.4",
        "M110 -113.7C149.4 -70.7 192.7 -35.4 196.3 3.7C200 42.7 164 85.3 124.7 135.3C85.3 185.3 42.7 242.7 -9.2 251.9C-61 261 -122.1 222.1 -165.1 172.1C-208.1 122.1 -233 61 -220.2 12.8C-207.4 -35.4 -156.7 -70.7 -113.7 -113.7C-70.7 -156.7 -35.4 -207.4 0 -207.4C35.4 -207.4 70.7 -156.7 110 -113.7",
        "M146.1 -155.6C175.2 -116.9 175.1 -58.5 174.8 -0.4C174.4 57.7 173.8 115.5 144.7 140.5C115.5 165.5 57.7 157.8 6.7 151C-44.3 144.3 -88.6 138.6 -138.6 113.6C-188.6 88.6 -244.3 44.3 -240.3 4C-236.3 -36.3 -172.6 -72.6 -122.6 -111.3C-72.6 -149.9 -36.3 -191 11.1 -202C58.5 -213.1 116.9 -194.2 146.1 -155.6",
        "M119.8 -143.1C144.8 -94.8 147.4 -47.4 159.1 11.7C170.7 70.7 191.4 141.4 166.4 175.4C141.4 209.4 70.7 206.7 1.5 205.2C-67.6 203.6 -135.3 203.3 -177.3 169.3C-219.3 135.3 -235.6 67.6 -235.2 0.5C-234.7 -66.7 -217.4 -133.4 -175.4 -181.7C-133.4 -230.1 -66.7 -260 -9.7 -250.4C47.4 -240.7 94.8 -191.4 119.8 -143.1",
        "M159.1 -179.6C188.6 -129.6 182.8 -64.8 168.1 -14.7C153.4 35.4 129.7 70.7 100.2 110.5C70.7 150.4 35.4 194.7 -17.6 212.2C-70.5 229.8 -140.9 220.6 -179.8 180.8C-218.6 140.9 -225.8 70.5 -221.3 4.5C-216.9 -61.5 -200.7 -123 -161.9 -173C-123 -223 -61.5 -261.5 1.6 -263.2C64.8 -264.8 129.6 -229.6 159.1 -179.6",
        "M159.2 -168.9C190.2 -128.2 188.1 -64.1 182 -6.1C175.9 51.9 165.7 103.7 134.7 128.7C103.7 153.7 51.9 151.9 0 151.9C-51.9 151.9 -103.7 153.7 -142.4 128.7C-181 103.7 -206.5 51.9 -215.9 -9.4C-225.4 -70.7 -218.8 -141.4 -180.1 -182.1C-141.4 -222.8 -70.7 -233.4 -3.3 -230.1C64.1 -226.8 128.2 -209.6 159.2 -168.9",
        "M113.4 -97.5C156 -70.7 206 -35.4 206.7 0.7C207.4 36.8 158.9 73.5 116.2 123.5C73.5 173.5 36.8 236.8 -15.3 252.1C-67.4 267.4 -134.8 234.8 -178.3 184.8C-221.8 134.8 -241.4 67.4 -241.4 0C-241.4 -67.4 -221.8 -134.8 -178.3 -161.7C-134.8 -188.5 -67.4 -174.7 -16 -158.7C35.4 -142.7 70.7 -124.4 113.4 -97.5",
        "M111.7 -110.9C139.6 -83.9 153.3 -42 150 -3.3C146.7 35.4 126.4 70.7 98.5 117.9C70.7 165 35.4 224 -10 234C-55.4 244.1 -110.8 205.1 -160.8 157.9C-210.8 110.8 -255.4 55.4 -254.2 1.2C-253 -53 -206.1 -106.1 -156.1 -133.1C-106.1 -160.1 -53 -161 -5.5 -155.5C42 -150 83.9 -137.9 111.7 -110.9"
    ]

    const morphToRandomShape = index => {
        let randomIndex = Math.floor(Math.random() * blobShapes.length)
        while (randomIndex === index) {
            randomIndex = Math.floor(Math.random() * blobShapes.length)
        }
        anime({
            targets: blobPathRef.current,
            d: blobShapes[randomIndex],
            duration: 5000,
            easing: 'easeInOutSine',
            complete: () => morphToRandomShape(randomIndex)
        })
    }

    useEffect(() => {
        morphToRandomShape(Math.floor(Math.random() * blobShapes.length))
    }, [])

    const handleClick = () => {
        anime({
            targets: blobPathRef.current,
            scale: [
                { value: 1.05, duration: 100, easing: 'easeOutQuad' },
                { value: 0.95, duration: 100, easing: 'easeOutQuad' },
                { value: 1.0, duration: 300, easing: 'easeOutElastic(1, .5)' }
            ]
        })
    }

    const svgStyle = {
        width: '100%',
        height: '100%',
    }

    const pathStyle = {
        fill: '#22195b',
        transition: 'fill 0.5s ease',
        cursor: 'pointer'
    }

    return (
        <svg
            {...props}
            style={svgStyle}
            onClick={handleClick}
            viewBox="-300 -300 600 600"
            xmlns="http://www.w3.org/2000/svg"
        >
            <path
                style={pathStyle}
                ref={blobPathRef}
                d="M200,0 C200,53 178.9,104 141.4,141.4 C103.9,178.9 53,200 0,200 C-53,200 -103.9,178.9 -141.4,141.4 C-178.9,103.9 -200,53 -200,0 C-200,-53 -178.9,-103.9 -141.4,-141.4 C-103.9,-178.9 -53,-200 0,-200 C53,-200 103.9,-178.9 141.4,-141.4 C178.9,-103.9 200,-53 200,0 Z"
                onMouseEnter={() => (blobPathRef.current.style.fill = '#4b39be')}
                onMouseLeave={() => (blobPathRef.current.style.fill = '#22195b')}
            />
        </svg>
    )
}

export default Blob
